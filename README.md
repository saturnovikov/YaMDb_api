# Проект YaMDb
## Описание

Проект YaMDB собирает отзывы (Review) пользователей на произведения (Titles). Произведения делятся на категории: "Книги", "Фильмы", "Музыка". Список категорий (Category) может быть расширен администратором.

Сами произведения здесь не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
Вкаждой категории есть произведения: книги, фильмы или музыка.

Произведению может быть прсвоен жанр (Genre) из списка предустановленных. Новые жанры может создавать только администратор.

Благодарные или возмущенные пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усредненная оценка произведения - рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.

### Алгоритм регистрации пользователей
Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами email и username на эндпоинт ```/api/v1/auth/signup/```.

YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на адрес email.

Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт ```/api/v1/auth/token/```, в ответе на запрос ему приходит token (JWT-токен).

При желании пользователь отправляет PATCH-запрос на эндпоинт ```/api/v1/users/me/``` и заполняет поля в своём профайле (описание полей - в документации).

### Пользовательские роли
**Аноним** - может просматривать описания произведений, читать отзывы и комментарии.
Аутентифицированный пользователь (user) - может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.

**Модератор (moderator)** - те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.

**Администратор (admin)** - полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
Суперюзер Django — обладет правами администратора (admin).

### Создание пользователя администратором
Пользователя может создать администратор - через админ-зону сайта или через POST-запрос на специальный эндпоинт ```api/v1/users/``` (описание полей запроса для этого случая - в документации). В этот момент письмо с кодом подтверждения пользователю отправлять не нужно.

После этого пользователь должен самостоятельно отправить свой email и username на эндпоинт ```/api/v1/auth/signup/``` , в ответ ему должно прийти письмо с кодом подтверждения.

Далее пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт ```/api/v1/auth/token/```, в ответе на запрос ему приходит token (JWT-токен), как и при самостоятельной регистрации.

Документация к API доступна по адресу: http://127.0.0.1:8000/redoc/

## Установка
### Как запустить проект:

1. Клонировать репозитрий и перейти в него в командной строке:

```$git clone https://github.com/AnastasiyaVysotskaya/api_yamdb```

```$cd api_yamdb```

2. Создать и активировать виртуалье окружение:

```$python -m venv venv```
```$source venv/Scripts/activate```

3. Установить зависимости из файла requirements.txt
```$python -m pip install --upgrade pip```
```$pip install -r requirements.txt```

4. Выполнить минрации:

```$python manage.py makemigrations```
```$python manage.py migrate```

5. Запустить проект:

```$python manage.py runserver```

## Примеры работы с API для всех пользователей

Для неавторизованных пользователей работа с API доступна в режиме чтения, что-либо изменить или создать не получится.

```GET api/v1/categories/``` - получить список всех категорий.

```GET api/v1/genres/``` - получение списка всех жанров.

```GET api/v1/titles/``` - получение списка всех произведений.

```GET api/v1/titles/{title_id}/reviews/``` - получение списка всех отзывов.

```GET api/v1/titles/{title_id}/reviews/{review_id}/comments/``` - получение списка всех комментариев к отзыву.

## Технологии

<img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue" /><img src="https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white" /><img src="https://img.shields.io/badge/django%20rest-ff1709?style=for-the-badge&logo=django&logoColor=white" /><img src="https://img.shields.io/badge/SQLite-07405E?style=for-the-badge&logo=sqlite&logoColor=white" /><img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON%20web%20tokens&logoColor=white" />

## Разработчики
| [<img src="https://github.com/AnastasiyaVysotskaya.png?size=115" width="115"><br><sub>@AnastasiyaVysotskaya</sub>](https://github.com/AnastasiyaVysotskaya) |
| :---------------------------------------------------------------------------------------------------------------------: |
**Высоцкая Анастасия**: управление пользователями (Auth и Users): система регистрации и аутентификации пользователей, пользовательские роли и права доступа, работа с токеном, система подтверждения через e-mail.

| [<img src="https://github.com/saturnovikov.png?size=115" width="115"><br><sub>@saturnovikov</sub>](https://github.com/saturnovikov) |
| :---------------------------------------------------------------------------------------------------------------------: |
**Новиков Антон**: категории (Categories), жанры (Genres) и произведения (Titles): модели, view и эндпойнты. Рейтинги произведений. Отзывы (Review) и комментарии (Comments): модели, view и эндпойнты.
